$(document).ready(function(){function e(){var e=localStorage.donate;"undefined"==typeof e&&(localStorage.donate="false"),"false"===e&&(localStorage.donate="true",n("For the next 48 hours we're raising money in honour of our good friend who passed away to start a scholarship in his name, every penny counts. "))}function t(){var e=document.getElementById("dirty");"1"==e.value&&l(Base64.decode(localStorage.results))}function n(e){var t=new BootstrapDialog({message:e,buttons:[{id:"btn-1",label:"Donate!"}]});t.realize();var n=t.getButton("btn-1");n.click({name:"Apple"},function(){var e="http://igg.me/at/rememberalex/x/3590458";window.open(e)}),t.open()}function o(){if(p){p=!1;var e=this;window.XMLHttpRequest?e.xmlHttpReq=new XMLHttpRequest:window.ActiveXObject&&(e.xmlHttpReq=new ActiveXObject("Microsoft.XMLHTTP")),e.xmlHttpReq.open("POST","core/callSearchEngine.php",!0),e.xmlHttpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.xmlHttpReq.onreadystatechange=function(){if(4==e.xmlHttpReq.readyState){$("#loadingicon").hide();var t=document.getElementById("dirty");t.value="1";var n=e.xmlHttpReq.responseText;l(n),"Please enter a search phrase.."!=n&&"No torrents could be found..."!=n&&(localStorage.results=Base64.encode(n)),p=!0}};var t=a();(t.toLowerCase().indexOf("imgur")>-1||t.toLowerCase().indexOf("reddit")>-1&&0==f)&&($("body").append('<iframe id="catfinder" src="https://getstrike.net/torrents/catfinder/" width="320" height="430" style="position:fixed;bottom:0px;right:10px;z-index:100" frameBorder="0"></iframe>'),$("#catfinder").fadeIn("slow"),f=!0);var n=t.replace(/\s+/g,"");return(n.toLowerCase().indexOf("halflife3")>-1||n.toLowerCase().indexOf("pcmasterrace")>-1&&0==m)&&($("body").append('<img id="gaben" src="https://getstrike.net/torrents/assets/img/closeupgaben.png" alt="gaben" style="width:640px;height:353px;position:fixed;bottom:0px;right:10px;z-index:100">'),$("#gaben").fadeIn("slow"),m=!0),e.xmlHttpReq.send(t),!1}}function a(){var e=document.forms.filters,t=e.phrase.value;if(i(t))return"";var n="query="+encodeURIComponent(t.trim());return n}function i(e){return!e||0===e.length}function r(){var e=new BootstrapDialog({message:"This project is not for profit, there will never be advertisements <br>If you wish to donate to help with hosting/API maintaining cost you can do so <br>Below is a button that will take you to paypal, alternatively our bitcoin address is 1DpnZFPikokWwab4muVbjUXZDAD25DhXj3",buttons:[{id:"btn-1",label:"Donate via Paypal"}]});e.realize();var t=e.getButton("btn-1");t.click({name:"Apple"},function(){var e="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=TWHNPSC7HRNR2";window.open(e)}),e.open()}function l(e){document.getElementById("data").innerHTML=e,$("#data").hide().fadeIn("slow"),$("#stats").hide().fadeIn("slow"),$("#results").hide().fadeIn("slow"),$.bootstrapSortable(!0)}function d(){o()}function c(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function s(){$("#loadingicon").hide(),$("#search").bind("click",function(){$("#searchform").submit()}),$("#searchform").submit(function(e){$("#loadingicon").hide().fadeIn("slow"),$("#data").hide(),e.preventDefault(),d()}),$(document).on("click","#bars",function(){$("#table").toggleClass("table-condensed")}),$(document).on("click","#donate",function(){r()}),$(document).on("click","#toggle-lock",function(){$("i",this).toggleClass("fa-lock fa-unlock")}),$(document).on("click",".clickable-row",function(){window.document.location=$(this).data("href")});var e=localStorage.query;i(e)||($("#phrase").val(e),$("#loadingicon").hide().fadeIn("slow"),$("#data").hide(),d(),localStorage.query="");var t=c("q");i(t)||($("#phrase").val(t),$("#loadingicon").hide().fadeIn("slow"),$("#data").hide(),d())}function u(e){if("removetheiframe"==e.data)for(var t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])}var p=!0,f=!1,m=!1;s(),t(),e(),window.addEventListener("message",u,!1)});